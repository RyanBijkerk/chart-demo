
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://requirejs.org/docs/release/2.3.6/minified/require.js"></script>


<h1>Hello Demo...</h1>
<canvas id="bar-chart" width="800" height="450"></canvas>

<script>

    function fetchJSONFile(path, callback) {
        var httpRequest = new XMLHttpRequest();
        httpRequest.onreadystatechange = function() {
            if (httpRequest.readyState === 4) {
                if (httpRequest.status === 200) {
                    var data = JSON.parse(httpRequest.responseText);
                    if (callback) callback(data);
                }
            }
        };
        httpRequest.open('GET', path);
        httpRequest.send();
    }

    function createChart(json) {
        console.log("function...");
        console.log(json);
        
        var title = json.title

        var labels = json.data.map(function(e) {
        return e.name;
        });

        var data = json.data.map(function(e) {
            return e.posts;
        });


        new Chart(document.getElementById("bar-chart"), {
            type: 'bar',
            data: {
            labels: labels,
            datasets: [
                {
                label: title,
                backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
                data: data
                }
            ]
            },
            options: {
            legend: { display: false },
            title: {
                display: true,
                text: title
            }
            }
        });
    }

    fetchJSONFile("data.json", createChart)

</script>